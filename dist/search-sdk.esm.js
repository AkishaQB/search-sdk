class t{constructor(t){this.ttlMs=t,this.store=new Map}set(t,e){const n=Date.now()+this.ttlMs;this.store.set(t,{value:e,expiresAt:n})}get(t){const e=this.store.get(t);if(e){if(!(Date.now()>e.expiresAt))return e.value;this.store.delete(t)}}}function e({debounceMs:e,maxCalls:n,interval:s,cacheTtl:o}){const r=function({max:t,interval:e}){let n=t,s=Date.now();const o=t/e;return{acquire(){const e=Date.now(),r=e-s;return n=Math.min(t,n+r*o),s=e,n>=1&&(n-=1,!0)}}}({max:n,interval:s}),a=new t(o);return function(t,e=200){const n=null;function s(...s){const o=this;n=setTimeout(()=>{t.apply(o,s),n=null},e)}return s.cancel=function(){n&&(clearTimeout(n),n=null)},s}(async(t,e)=>{const n=a.get(e);if(void 0!==n)return n;if(!r.acquire())throw new Error("Rate limit exceeded");const s=await async function(t,e={}){const{headers:n={},...s}=e,o=await fetch(t,{...s,headers:{"Content-Type":"application/json",...n}});let r;try{r=await o.json()}catch{r=null}if(!o.ok){const t=new Error(`HTTP ${o.status}`);throw t.status=o.status,t.body=r,t}return r}(`${t}?q=${encodeURIComponent(e)}`);return a.set(e,s),s},e)}export{e as SearchClient};
//# sourceMappingURL=search-sdk.esm.js.map
